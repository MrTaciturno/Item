<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Laudos de Vistoria</title>
    <script src='https://unpkg.com/tesseract.js@v2.1.0/dist/tesseract.min.js'></script>
    <script src="https://unpkg.com/docx@7.1.0/build/index.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>



</head>
<body>
    <img id="cabeca" src="cabecalho.png" alt="Cabeçalho" style="width: 100%; ">


    <h1>Laudo de Vistoria</h1>
    <p>Use as preferências default, carregue o arquivo com as suas preferências ou edite e salve suas preferências:</p>
    
    <div style="text-align:center; display: inline-flex; width: 100%; padding: 2px;">
        <button id='importarPreferências' onclick="importarPref()" style="padding: 10px 40px; font-size: 1.2em; margin: 5px 0; height: 70px; width: 50%;">Importar Preferências</button>
        <button id='salvarPreferências' onclick="salvarPref()" style="padding: 10px 40px; font-size: 1.2em; margin: 5px 0; height: 70px; width: 50%;">Salvar Preferências</button>
        </div>
    <textarea id="dadosBase" name="dadosBase" rows="5"></textarea>
    
    <label for="REP">Digite o número da REP: <input id="REP" type="text" pattern="[0-9]{6}"></label>

    </div>
    
    <label for="textoOCR">Texto a ser processado (extraia e copie o texto com GoogleLens, CamScanner, etc.):</label>

    <textarea id="textoOCR" name="textoOCR" placeholder="Cole aqui o texto extraído" rows="5"></textarea>
     
    <button id='analisarTexto' onclick="analisarTexto()" style="padding: 10px 30px; font-size: 1.2em; height: 50px; margin: 5px 0; width: 100%;">Analisar Texto</button>
    
    <textarea id="textoAnalisado" placeholder="Informações processadas." name="textoAnalisado" rows="5"></textarea>

    <div style="display: flex; gap: 8px; width: 100%; margin-bottom: 5px;">
        <button id="novoDano" onclick="abrirPopupDano()" style="padding: 10px 30px; font-size: 1.2em; height: 50px; width: 50%;">Novo Dano</button>
        <div style="display: flex; flex-direction: column; justify-content: space-between; width: 50%; gap: 4px;">
            <button id="placaArtesanal" style="padding: 5px 6px; font-size: 0.9em; height: 24px; width: 100%; min-width: 0; margin-bottom: 2px;">Placa Artesanal</button>
            <button id="qrcodeNaoLe" style="padding: 5px 6px; font-size: 0.9em; height: 24px; width: 100%; min-width: 0; margin-bottom: 2px;">QR Code não lê</button>
            <button id="qrNaoPesquisa" style="padding: 5px 6px; font-size: 0.9em; height: 24px; width: 100%; min-width: 0;">QR não pesquisa</button>
        </div>
    </div>
    <script>
    document.getElementById('placaArtesanal').addEventListener('click', function() {
        const danosVeicTextarea = document.getElementById('danosVeic');
        // Se já houver texto e não termina com \n
        if (danosVeicTextarea.value.length > 0 && !danosVeicTextarea.value.endsWith('\n')) {
            danosVeicTextarea.value += '\n';
        }
        danosVeicTextarea.value += 'Placa artesanal para o Beto\n';
        danosVeicTextarea.dispatchEvent(new Event('input')); // dispara evento caso precise de auto salvamento
    });
    document.getElementById('qrcodeNaoLe').addEventListener('click', function() {
        const danosVeicTextarea = document.getElementById('danosVeic');
        // Se já houver texto e não termina com \n
        if (danosVeicTextarea.value.length > 0 && !danosVeicTextarea.value.endsWith('\n')) {
            danosVeicTextarea.value += '\n';
        }
        danosVeicTextarea.value += 'QR Code não lê para o Beto\n';
        danosVeicTextarea.dispatchEvent(new Event('input')); // dispara evento caso precise de auto salvamento
    });
    document.getElementById('qrNaoPesquisa').addEventListener('click', function() {
        const danosVeicTextarea = document.getElementById('danosVeic');
        // Se já houver texto e não termina com \n
        if (danosVeicTextarea.value.length > 0 && !danosVeicTextarea.value.endsWith('\n')) {
            danosVeicTextarea.value += '\n';
        }
        danosVeicTextarea.value += 'QR não pesquisa para o Beto\n';
        danosVeicTextarea.dispatchEvent(new Event('input')); // dispara evento caso precise de auto salvamento
    });
    </script>

    
    <div id="popupTipoDano" class="popup">
        <h3>Tipo de Dano</h3>

        <div>
            <input type="checkbox" id="amolgamento"> <label for="amolgamento">Amolgamento(s)</label><br>
            <input type="checkbox" id="atritamento"> <label for="atritamento">Atritamento(s)</label><br>
            <input type="checkbox" id="fratura"> <label for="fratura">Fratura(s)</label><br>
        </div>
        <button onclick="proximoOrientacao()" style="margin-top: 10px;">Próximo</button>
    </div>

    <div id="popupOrientacao" class="popup">
        <h3>Orientação</h3>
        <div>
            <input type="checkbox" id="frenteTras"> <label for="frenteTras">de frente para trás</label><br>
            <input type="checkbox" id="trasFrente"> <label for="trasFrente">de trás para frente</label><br>
            <input type="checkbox" id="dirEsq"> <label for="dirEsq">da direita para a esquerda</label><br>
            <input type="checkbox" id="esqDir"> <label for="esqDir">da esquerda para a direita</label><br>
            <input type="checkbox" id="cimaBaixo"> <label for="cimaBaixo">de cima para baixo</label><br>
            <input type="checkbox" id="baixoCima"> <label for="baixoCima">de baixo para cima</label><br>
        </div>
        <button onclick="proximoSituado()" style="margin-top: 10px;">Próximo</button>
    </div>

    <div id="popupSituado" class="popup">
        <h3>Situado</h3>
        <div>
            <input type="checkbox" id="pa"> <label for="pa">na porção anterior</label><br>
            <input type="checkbox" id="pad"> <label for="pad">na porção anterior direita</label><br>
            <input type="checkbox" id="pae"> <label for="pae">na porção anterior esquerda</label><br>
            <input type="checkbox" id="pp"> <label for="pp">na porção posterior</label><br>
            <input type="checkbox" id="ppd"> <label for="ppd">na porção posterior direita</label><br>
            <input type="checkbox" id="ppe"> <label for="ppe">na porção posterior esquerda</label><br>

        </div>
        <button onclick="finalizarDano()" style="margin-top: 10px;">FIM</button>
    </div>

    <textarea id="danosVeic" placeholder="Danos no veículo" name="danosVeic" rows="5"></textarea>

    <div style="text-align:center; display: inline-flex; width: 100%; padding: 2px;">

    <button id='novoTeste' onclick="abrirPopupTeste()" style="padding: 10px 20px; height: 70px; font-size: 1.2em; margin: 5px 0; width: 34%;">Exames veículo</button>

    <button id='veicOK' onclick="document.getElementById('testesVeic').value = 'Os seus sistemas de segurança para o tráfego (freio, direção e elétrico) se encontravam articulados e atuantes, quando dos exames. Pneumáticos em estado regular.'" style="padding: 10px 20px; font-size: 1.2em; height: 70px; margin: 5px 0; width: 33%;">Veículo OK</button>

    <button id='veicDep' onclick="document.getElementById('testesVeic').value = 'Veículo em estado de desmontagem completa, prejudicando os exames de praxe.'"style="padding: 10px 20px; font-size: 1.2em; height: 70px; margin: 5px 0; width: 33%;">Veículo Depenado</button>
    </div>

    <div id="popupTeste" class="popup" >
        <h3>Sistema de segurança</h3>
        <div>
            <input type="radio" id="a1" name="sistemasseg"> <label for="a1">operantes</label><br>
            <input type="radio" id="a2" name="sistemasseg"> <label for="a2">inoperantes</label><br>
            <input type="radio" id="a3" name="sistemasseg"> <label for="a3">prejudicados pelos danos</label><br>
        </div>
        <button onclick="proximoSSeg()" style="margin-top: 10px;">Próximo</button>
    </div>

    <div id="popupSistSeg" class="popup">
        <h3>Marcar não funcionais</h3> 
        <!-- em caso de operante -->
        <div>
            <input type="checkbox" id="lanternaAnteriorDireita"> <label for="lanternaAnteriorDireita">lanterna anterior direita</label><br>
            <input type="checkbox" id="lanternaAnteriorEsquerda"> <label for="lanternaAnteriorEsquerda">lanterna anterior esquerda</label><br>
            
            <input type="checkbox" id="farolDireito"> <label for="farolDireito">farol direito</label><br>
            <input type="checkbox" id="farolEsquerdo"> <label for="farolEsquerdo">farol esquerdo</label><br>

            <input type="checkbox" id="farolAltoDireito"> <label for="farolAltoDireito">farol alto direito</label><br>
            <input type="checkbox" id="farolAltoEsquerdo"> <label for="farolAltoEsquerdo">farol alto esquerdo</label><br>
            
            <input type="checkbox" id="setaAnteriorDireita"> <label for="setaAnteriorDireita">seta anterior direita</label><br>
            <input type="checkbox" id="setaAnteriorEsquerda"> <label for="setaAnteriorEsquerda">seta anterior esquerda</label><br>


        </div>
        <button onclick="testePneumatico()" style="margin-top: 10px;">Próximo</button>
    </div>

    <div id="popupSistSeg2" class="popup">
        <h3>Marcar observações</h3> 
        <!-- em caso de inoperante -->
        <div>
            <input type="checkbox" id="direc"> <label for="direc">Direção articulada e apresentando resistência.</label><br>
            <input type="checkbox" id="freio"> <label for="freio">Freio articulado e apresentando resistência.</label><br>
        </div>
        <button onclick="testePneumatico()" style="margin-top: 10px;">Próximo</button>
    </div>

    <div id="popupPneumatico" class="popup">
        <h3>Geral do Pneumáticos</h3> 
        <!-- em caso de inoperante -->
        <div>
            <input type="radio" id="b1" name="pneu"> <label for="b1">regulares</label><br>
            <input type="radio" id="b2" name="pneu"> <label for="b2">irregulares</label><br>
            <input type="radio" id="b3" name="pneu"> <label for="b3">desinflados</label><br>
            <input type="radio" id="b4" name="pneu"> <label for="b4">ausentes</label><br>
            <input type="radio" id="b5" name="pneu"> <label for="b5">danificados</label><br>
            
        </div>
        <button onclick="testePneumatico2()" style="margin-top: 10px;">Próximo</button>
    </div>
    
    <div id="popupPneumatico2" class="popup">
        <h3>Exceção dos pneus</h3> 
        <!-- em caso de inoperante -->
        <div>
            <input type="checkbox" id="pn1"> <label for="pn1">anterior direito - irregular</label><br>
            <input type="checkbox" id="pn2"> <label for="pn2">anterior esquerdo - irregular</label><br>
            <input type="checkbox" id="pn3"> <label for="pn3">posterior direito - irregular</label><br>
            <input type="checkbox" id="pn4"> <label for="pn4">posterior esquerdo - irregular</label><br>
            <input type="checkbox" id="pn1d"> <label for="pn1d">anterior direito - desinflado</label><br>

        </div>
        <button onclick="finalizarTeste()" style="margin-top: 10px;">Finalizar</button>
    </div>

    <textarea id="testesVeic" placeholder="Testes veiculares" name="testesVeic" rows="5"></textarea>


    <div style="text-align:center; display: inline-flex; width: 100%; padding: 2px;">
    <button id='pegarFotos' onclick="pegaFotos()" style="padding: 10px 30px; font-size: 1.2em; margin: 5px 0; width: 60%;">Pegar Fotos</button>
    <button id='apagarFotos' onclick="apagaFotos()" style="padding: 10px 30px; font-size: 1.2em; margin: 5px 0; width: 40%;">Apagar Fotos</button>
    
    </div>
    <button onclick="abrirLegendasPadrao()" style="padding: 10px 30px; font-size: 1.2em; margin: 5px 0; width: 100%;">Editar Legendas</button>
    <button id="gerarDocumentoWord" onclick="montaLaudo()" style="padding: 10px 30px; font-size: 1.2em; margin: 5px 0; width: 100%;">Gerar Documento Word</button>

    

    <div id="popupLegendasPadrao" class="popup">
        <h3>Legendas Padrão</h3>
        <div>
            <input type="checkbox" checked="true" id="legenda01"> <label for="legenda01">Vista geral do veículo.</label><br>
            <input type="checkbox" checked="true" id="legenda02"> <label for="legenda02">Vista geral do veículo.</label><br>
            <input type="checkbox" checked="true" id="legenda03"> <label for="legenda03">Vista geral do veículo.</label><br>
            <input type="checkbox" checked="true" id="legenda04"> <label for="legenda04">Vista geral do veículo.</label><br>
            <input type="checkbox" id="legenda05"> <label for="legenda05">Sede dos danos.</label><br>
            <input type="checkbox" id="legenda06"> <label for="legenda06">Detalhes dos danos.</label><br>
            <input type="checkbox" id="legenda06a"> <label for="legenda06a">Detalhes dos danos.</label><br>
            <input type="checkbox" id="legenda06b"> <label for="legenda06b">Detalhes dos danos.</label><br>
            <input type="checkbox" id="legenda06c"> <label for="legenda06c">Detalhes dos danos.</label><br>
            <input type="checkbox" id="legenda07"> <label for="legenda07">Interior do veículo.</label><br>
            <input type="checkbox" id="legenda08"> <label for="legenda08">Interior do veículo.</label><br>
            <input type="checkbox" id="legenda09"> <label for="legenda09">Emplacamento posterior.</label><br>
            <input type="checkbox" id="legenda10"> <label for="legenda10">Emplacamento anterior.</label><br>
            <input type="checkbox" id="legenda11"> <label for="legenda11">Numeral VIN.</label><br>
            <input type="checkbox" id="legenda12"> <label for="legenda12">Parte do numeral VIN.</label><br>
            
        </div>
        <button onclick="fecharLegendasPadrao()" style="margin-top: 10px;">Fechar</button>
    </div>
    

    <div id="bedeibagens" style="width: 100%">

    </div>
    
<script src="script.js"></script>
</body>
</html>
